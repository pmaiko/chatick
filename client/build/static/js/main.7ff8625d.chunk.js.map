{"version":3,"sources":["store/types.js","constants.js","api/api.js","store/Auth/actions.js","store/Auth/reducers.js","store/reducers.js","store/actions.js","store/index.js","components/header.js","pages/SignIn.js","pages/SignUp.js","pages/GeneralChat.js","pages/Users.js","pages/ChatWrapper.js","App.js","index.js"],"names":["API_URL","window","location","protocol","URL","host","params","callback","axios","post","then","data","decodeToken","localStorage","getItem","state","token","replace","split","payload","JSON","parse","Base64","decode","userId","firstName","lastName","email","defaults","headers","common","logged","setItem","login","password","dispatch","api","loginRequest","type","types","json","checkLogged","logout","initialState","undefined","combineReducers","auth","action","removeItem","mapStateToProps","mapDispatchToProps","actions","store","component","connect","props","history","useHistory","className","href","onClick","e","preventDefault","push","to","useEffect","useState","setState","handleChange","target","name","value","onSubmit","htmlFor","id","autoComplete","placeholder","onChange","useForm","register","handleSubmit","watch","errors","console","log","ref","required","_isMounted","newState","messageInput","messages","this","socket","emit","on","message","generalMessage","prevLogged","outputMessage","map","el","i","isMyself","key","sendMessage","Component","users","outputUsers","openSocket","path","ChatWrapper","SignUp","SignIn","createStore","reducers","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7ff8625d.chunk.js","sourcesContent":["export const LOGIN = 'LOGIN';\r\nexport const CHECK_LOGGED = \"CHECK_LOGGED\";\r\nexport const LOGOUT = 'LOGOUT';\r\n\r\n\r\nexport default {\r\n    LOGIN,\r\n    CHECK_LOGGED,\r\n    LOGOUT,\r\n}\r\n","export const API_URL = process.env.NODE_ENV === 'production' ? `${window.location.protocol}/api/v1/` : 'http://localhost:5000/api/v1/';\r\nexport const URL = process.env.NODE_ENV === 'production' ? `${window.location.host}` : 'http://localhost:5000';\r\n","import axios from 'axios';\r\nimport {API_URL} from '../constants'\r\n\r\nexport default {\r\n    register (params, callback) {\r\n        axios.post(API_URL + 'register-user', params).then((data) => {\r\n            callback(data);\r\n        })\r\n    },\r\n\r\n    login (params, callback) {\r\n        axios.post(API_URL + 'login', params).then((data) => {\r\n            callback(data);\r\n        })\r\n    }\r\n}\r\n","import types from '../types'\r\nimport api from \"../../api/api\";\r\nimport {Base64} from \"js-base64\";\r\nimport axios from \"axios/index\";\r\n\r\n\r\nconst decodeToken = (data = window.localStorage.getItem('token')) => {\r\n    let state = {};\r\n    if (data) {\r\n        let token = data;\r\n\r\n        state.token = token;\r\n        token = token.replace(\"Bearer \", \"\");\r\n        token = token.split('.');\r\n\r\n        let header = token[0];\r\n        let payload = token[1];\r\n        let signature = token[2];\r\n        payload = JSON.parse(Base64.decode(payload));\r\n\r\n        state.userId = payload.userId;\r\n        state.firstName = payload.firstName;\r\n        state.lastName = payload.lastName;\r\n        state.email = payload.email;\r\n\r\n        axios.defaults.headers.common['Authorization'] = data;\r\n        state.logged = true;\r\n        localStorage.setItem('token', data);\r\n    }\r\n    return state;\r\n\r\n};\r\n\r\nexport default  {\r\n    login(email, password) {\r\n        return dispatch => {\r\n            const params = {\r\n                email: email,\r\n                password: password,\r\n            };\r\n            api.login(params, (data) => {\r\n                const state = decodeToken(data.data);\r\n                dispatch(this.loginRequest({\r\n                    type: types.LOGIN,\r\n                    ...state,\r\n                }));\r\n            });\r\n        }\r\n\r\n    },\r\n\r\n    loginRequest(json) {\r\n        return json;\r\n    },\r\n\r\n    checkLogged() {\r\n        const state = decodeToken();\r\n        return {\r\n            type: types.CHECK_LOGGED,\r\n            ...state\r\n        }\r\n    },\r\n\r\n    logout() {\r\n        return {\r\n            type: types.LOGOUT,\r\n        }\r\n    }\r\n}\r\n","import types from '../types';\r\nimport api from '../../api/api';\r\nimport { Base64 } from 'js-base64';\r\nimport axios from 'axios';\r\n\r\nconst initialState = {\r\n    logged: false,\r\n    token: undefined,\r\n    userId: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    email: '',\r\n};\r\n\r\nexport function authReducers(state, action) {\r\n    if (typeof state === 'undefined') {\r\n        return initialState;\r\n    }\r\n\r\n    switch (action.type) {\r\n        case types.LOGIN: {\r\n            state = {\r\n                ...action\r\n            };\r\n\r\n            break;\r\n        }\r\n\r\n        case types.CHECK_LOGGED: {\r\n            if(!action.token) {\r\n                state.token = undefined;\r\n                state.logged = false;\r\n            }\r\n            else {\r\n                state = {\r\n                    ...action\r\n                };\r\n            }\r\n\r\n\r\n            break;\r\n        }\r\n\r\n        case types.LOGOUT: {\r\n            window.localStorage.removeItem('token');\r\n            axios.defaults.headers.common['Authorization'] = '';\r\n\r\n            state.token = undefined;\r\n            state.logged = false;\r\n\r\n            break;\r\n        }\r\n    }\r\n\r\n        return state;\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport { authReducers } from \"./Auth/reducers\";\r\n\r\nexport default combineReducers({\r\n    auth: authReducers,\r\n});\r\n","import auth  from './Auth/actions';\r\n\r\nexport default {\r\n    ...auth,\r\n}\r\n","import actions from \"./actions\";\r\nimport { connect } from 'react-redux';\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        ...state\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    ...actions,\r\n};\r\n\r\nexport const store = (component) => {\r\n    return connect(mapStateToProps, mapDispatchToProps)(component);\r\n};\r\n","import React, {useState, useEffect, useMemo} from \"react\";\r\nimport { store } from \"../store\";\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\nfunction Header(props) {\r\n    const history = useHistory();\r\n    let logged = props.auth.logged;\r\n\r\n    let logout = () => {\r\n        props.logout();\r\n        history.push(\"/\");\r\n    };\r\n\r\n    const infoJsx = () => {\r\n        if(logged) {\r\n            return (\r\n                <div className=\"actions\">\r\n                    <a href=\"#\" onClick={(e) => {e.preventDefault(); logout()}}>\r\n\r\n                        Logout\r\n                    </a>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        else {\r\n            return(\r\n                <div className=\"actions\">\r\n                    <Link to=\"/registration\">Sign Up</Link>\r\n                </div>\r\n\r\n            );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"header\">\r\n            <div className=\"logo\">\r\n                Chatick\r\n            </div>\r\n\r\n            {infoJsx()}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default store(Header);\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport { store } from '../store/index';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\nfunction SingIn(props) {\r\n    let history = useHistory();\r\n    useEffect(() =>{\r\n        if (props.auth.logged) {\r\n            history.push(\"/chatWrapper\");\r\n        }\r\n    },[props.auth.logged]);\r\n\r\n    const [state, setState] = useState({email: '', password: ''});\r\n\r\n    const handleChange = (e) => {\r\n        setState({\r\n            ...state,\r\n            [e.target.name]: e.target.value,\r\n        });\r\n    };\r\n    const submitForm =  (e) => {\r\n        e.preventDefault();\r\n        props.login(state.email, state.password);\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"sign-in form\">\r\n            <div className=\"form\">\r\n                <div className=\"form__title\">\r\n                    LOGIN\r\n                </div>\r\n                <form onSubmit={submitForm}>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"email\">Email address</label>\r\n                        <input type=\"email\"\r\n                               className=\"form-control\"\r\n                               name=\"email\"\r\n                               id=\"email\"\r\n                               autoComplete=\"username\"\r\n                               placeholder=\"Enter email\"\r\n                               value={state.email}\r\n                               onChange={handleChange}\r\n                        />\r\n                        <small id=\"emailHelp\" className=\"form-text text-muted\">We'll never share your email with\r\n                            anyone else.\r\n                        </small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"password\">Password</label>\r\n                        <input type=\"password\"\r\n                               className=\"form-control\"\r\n                               name=\"password\"\r\n                               id=\"password\"\r\n                               autoComplete=\"current-password\"\r\n                               placeholder=\"Password\"\r\n                               value={state.password}\r\n                               onChange={handleChange}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form__buttons\">\r\n                        <button type=\"submit\" className=\"btn btn-primary w-100\">Login</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\nexport default store(SingIn);\r\n","import React, { useState } from 'react'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useForm } from 'react-hook-form';\r\nimport api from '../api/api';\r\nimport { store } from '../store/index';\r\n\r\nfunction SingUp(props) {\r\n    const history = useHistory();\r\n    const { register, handleSubmit, watch, errors } = useForm();\r\n    const [state, setState] = useState({\r\n        firstName: '',\r\n        lastName: '',\r\n        email: '',\r\n        password: '',\r\n    });\r\n\r\n    const submitForm = () => {\r\n        api.register(state, (data) => {\r\n            console.log(data)\r\n        })\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        setState({\r\n            ...state,\r\n            [e.target.name]: e.target.value\r\n        });\r\n\r\n    };\r\n\r\n    return (\r\n\r\n        <div className=\"sign-up\">\r\n            <div className=\"form\">\r\n                <div className=\"form__title\">\r\n                    Registration\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit(submitForm)}>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"firstName\">First Name</label>\r\n\r\n                        <input type=\"text\"\r\n                               className=\"form-control\"\r\n                               id=\"firstName\"\r\n                               name=\"firstName\"\r\n                               placeholder=\"First Name\"\r\n                               ref={register({ required: true })}\r\n                               onChange={handleChange}\r\n                               value={state.firstName}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"lastName\">Last Name</label>\r\n                        <input type=\"text\"\r\n                               className=\"form-control\"\r\n                               id=\"lastName\"\r\n                               name=\"lastName\"\r\n                               placeholder=\"Last Name\"\r\n                               onChange={handleChange}\r\n                               value={state.lastName}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"email\">Email address</label>\r\n\r\n                        <input type=\"email\"\r\n                               className=\"form-control\"\r\n                               id=\"email\"\r\n                               name=\"email\"\r\n                               autoComplete=\"username\"\r\n                               placeholder=\"Enter email\"\r\n                               onChange={handleChange}\r\n                               value={state.email}\r\n                        />\r\n\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"password\">Password</label>\r\n                        <input type=\"password\"\r\n                               className=\"form-control\"\r\n                               id=\"password\"\r\n                               name=\"password\"\r\n                               placeholder=\"Password\"\r\n                               autoComplete=\"current-password\"\r\n                               onChange={handleChange}\r\n                               value={state.password}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form__buttons\">\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"btn btn-primary\"\r\n                        >\r\n                            Registration\r\n                        </button>\r\n                        <button\r\n                            onClick={() => {history.push(\"/\");}}\r\n                            className=\"btn btn-dark\"\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default store(SingUp);\r\n\r\n","import React, { Component } from 'react'\r\nimport { store } from '../store/index';\r\n\r\nclass GeneralChat extends Component {\r\n    _isMounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            messageInput: '',\r\n            messages: [],\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this._isMounted = true;\r\n        if(this.props.auth.logged) {\r\n            this.props.socket.emit('getGeneralMessage');\r\n        }\r\n\r\n        this.props.socket.on('message', (data) => {\r\n            let newState = this.state;\r\n            newState.messages = [...newState.messages, {message: data.messageInput, userId: data.userId}];\r\n\r\n            if (this._isMounted) {\r\n                this.setState({\r\n                        ...newState,\r\n                    }\r\n                );\r\n            }\r\n        });\r\n\r\n        this.props.socket.on('getGeneralMessage', (data) => {\r\n            let newState = this.state;\r\n            newState.messages = [...newState.messages, {\r\n                message: data.generalMessage,\r\n                userId: data.userId,\r\n                firstName: data.firstName,\r\n                lastName: data.lastName,\r\n            }];\r\n\r\n            if (this._isMounted) {\r\n                this.setState({\r\n                        ...newState,\r\n                    }\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillUnmount(prevLogged) {\r\n        this._isMounted = false;\r\n\r\n        // if(prevLogged !== this.props.auth.logged) {\r\n        //     this.props.socket.emit('getGeneralMessage');\r\n        // }\r\n    }\r\n\r\n    sendMessage() {\r\n        this.props.socket.emit('message', {messageInput: this.state.messageInput, userId: this.props.auth.userId});\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        let newState = this.state;\r\n        newState.messageInput = e.target.value;\r\n        this.setState({\r\n                ...newState,\r\n            }\r\n        );\r\n    };\r\n\r\n\r\n    render() {\r\n        let outputMessage = this.state.messages.map((el, i) => {\r\n            let isMyself = false;\r\n            el.userId === this.props.auth.userId ? isMyself = true : isMyself = false;\r\n\r\n            return (\r\n                <div key={i} className=\"massages__item\">\r\n                    <div className=\"messages__author\">\r\n                        {!isMyself ? el.firstName + ' ' + el.lastName + ':': 'I:'}\r\n                    </div>\r\n                    <div className={isMyself ? 'massages__text--right' : 'massages__text'} >\r\n                        {el.message}\r\n                    </div>\r\n                </div>\r\n            );\r\n        });\r\n\r\n        return (\r\n            <div className=\"ChatWrapper\">\r\n                <div className=\"massages\">\r\n                    {outputMessage}\r\n                </div>\r\n                <textarea className=\"message\" onChange={this.handleChange} value={this.state.messageInput}/>\r\n                <button className=\"sendMessage\" onClick={()=>{this.sendMessage()}}>sss</button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // render() {\r\n    //     return (\r\n    //         <div>ad</div>\r\n    //     );\r\n    // }\r\n}\r\n\r\nexport default store(GeneralChat);\r\n\r\n","import React, { Component } from 'react'\r\nimport { store } from '../store/index';\r\n\r\nclass Users extends Component {\r\n    _isMounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            users: [],\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this._isMounted = true;\r\n        if(this.props.auth.logged) {\r\n            this.props.socket.emit('getUsers');\r\n        }\r\n\r\n\r\n        this.props.socket.on('getUsers', (data) => {\r\n            let newState = this.state;\r\n            newState.users = data;\r\n            //console.log(newState.users);\r\n            if (this._isMounted) {\r\n                this.setState({\r\n                        ...newState,\r\n                    }\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this._isMounted = false;\r\n    }\r\n\r\n    sendMessage() {\r\n        this.props.socket.emit('message', {messageInput: this.state.messageInput, userId: this.props.auth.userId});\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        let newState = this.state;\r\n        newState.messageInput = e.target.value;\r\n        this.setState({\r\n                ...newState,\r\n            }\r\n        );\r\n    };\r\n\r\n\r\n    render() {\r\n\r\n        let outputUsers = this.state.users.map((el, i) => {\r\n            // console.log(el);\r\n            return (\r\n                <div key={i} className=\"\">\r\n                    {el.firstName} {el.lastName}\r\n                </div>\r\n            );\r\n        });\r\n\r\n        return (\r\n            <div className=\"GeneralChat\">\r\n                {outputUsers}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default store(Users);\r\n\r\n","import React, { useState, useEffect } from 'react'\r\nimport { store } from '../store/index'\r\nimport GeneralChat from './GeneralChat'\r\nimport Users from './Users'\r\nimport openSocket from 'socket.io-client'\r\nimport { URL } from '../constants'\r\nimport { useHistory } from \"react-router-dom\";\r\nlet socket = openSocket(URL);\r\n\r\nfunction ChatWrapper(props) {\r\n    let history = useHistory();\r\n    useEffect(() => {\r\n        if (!props.auth.logged) {\r\n            history.push(\"/\");\r\n        }\r\n        else {\r\n        }\r\n    }, [props.auth.logged]);\r\n\r\n\r\n    return (\r\n        <div className=\"ChatWrapper\">\r\n            <div className=\"container-fluid\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-3\">\r\n                        <Users socket={socket}/>\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <GeneralChat socket={socket}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default store(ChatWrapper);\r\n\r\n","import React,{useEffect} from 'react';\r\nimport {store} from \"./store\";\r\nimport Header from \"./components/header\";\r\n\r\n// import {Router, Route, Switch, Redirect} from \"react-router\";\r\n// import { createBrowserHistory } from \"history\";\r\n\r\nimport {BrowserRouter, Switch, Route} from \"react-router-dom\"\r\n\r\n// import openSocket from 'socket.io-client';\r\nimport SignIn from \"./pages/SignIn\";\r\nimport SignUp from \"./pages/SignUp\";\r\nimport ChatWrapper from \"./pages/ChatWrapper\";\r\n\r\n// const history = createBrowserHistory();\r\n// let path = history.location.pathname;\r\n\r\nfunction App(props) {\r\n    useEffect(() => {\r\n        props.checkLogged();\r\n        // const socket = openSocket('http://localhost:5000');\r\n    },[]);\r\n\r\n\r\n    return (\r\n        <BrowserRouter>\r\n            <Header />\r\n            <Switch>\r\n                <Route path=\"/chatWrapper\" component={ChatWrapper}/>\r\n                <Route path=\"/registration\" component={SignUp}/>\r\n                <Route path=\"/\" component={SignIn}/>\r\n            </Switch>\r\n\r\n        </BrowserRouter>\r\n    )\r\n}\r\n\r\nexport default store(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport actions from './store/Auth/actions'\r\n\r\nimport reducers from './store/reducers';\r\nimport App from './App';\r\n\r\n// styles\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './assets/sass/app.scss'\r\n\r\nconst store = createStore(reducers, applyMiddleware(thunk));\r\n// store.getState();\r\n// store.subscribe(() => store.getState());\r\n//store.dispatch(actions.loginRequest()).then(() => console.log(store.getState()))\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>,\r\n    document.getElementById('app')\r\n);\r\n"],"sourceRoot":""}