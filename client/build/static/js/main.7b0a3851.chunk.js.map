{"version":3,"sources":["store/types.js","constants.js","api/api.js","store/Auth/actions.js","store/Auth/reducers.js","store/Socket/reducers.js","store/reducers.js","store/Socket/actions.js","store/actions.js","store/index.js","components/header.js","pages/SignIn.js","pages/SignUp.js","script.js","pages/Chat.jsx","pages/GeneralChat.js","pages/Users.js","pages/PrivateChat.js","pages/ChatWrapper.js","App.js","index.js","assets/images/ava.png"],"names":["API_URL","window","location","protocol","URL","host","params","callback","axios","post","then","data","decodeToken","localStorage","getItem","state","token","replace","split","payload","JSON","parse","Base64","decode","userId","firstName","lastName","email","defaults","headers","common","logged","setItem","login","password","dispatch","api","loginRequest","type","types","json","checkLogged","logout","initialState","undefined","socketId","combineReducers","auth","action","removeItem","s_socket","writeSocketId","socket","mapStateToProps","mapDispatchToProps","actions","store","component","connect","props","history","useHistory","className","href","onClick","e","preventDefault","push","to","useEffect","useState","setState","handleChange","target","name","value","onSubmit","htmlFor","id","autoComplete","placeholder","onChange","useForm","register","handleSubmit","watch","errors","console","log","ref","required","addSize","document","querySelector","header","chat_send_area","page_wrapper","messages","chat_header","main","headerHeight","clientHeight","chat_send_areaHeight","chat_headerHeight","style","paddingTop","height","addEventListener","scrollMessage","scrollTop","scrollHeight","Chat","outputMessage","this","map","el","i","isMyself","key","src","avaImg","alt","message","messageInput","onKeyPress","keyPressed","sendMessage","Component","_isMounted","event","newState","socketIdPrev","on","mixins","emit","prevLogged","users","usersConnect","user","userConnect","_id","outputUsers","PrivateChat","userFromId","match","userToId","prevProps","prevState","withRouter","io","path","useParams","ChatWrapper","SignUp","SignIn","createStore","reducers","applyMiddleware","thunk","ReactDOM","render","getElementById","module","exports"],"mappings":"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","file":"static/js/main.7b0a3851.chunk.js","sourcesContent":["export const LOGIN = 'LOGIN';\r\nexport const CHECK_LOGGED = \"CHECK_LOGGED\";\r\nexport const LOGOUT = 'LOGOUT';\r\nexport const SOCKET_ID = 'SOCKET_ID';\r\n\r\n\r\nexport default {\r\n    LOGIN,\r\n    CHECK_LOGGED,\r\n    LOGOUT,\r\n    SOCKET_ID,\r\n}\r\n","export const API_URL = process.env.NODE_ENV === 'production' ? `${window.location.protocol}/api/v1/` : 'http://localhost:5000/api/v1/';\r\nexport const URL = process.env.NODE_ENV === 'production' ? `${window.location.host}` : 'http://localhost:5000';\r\n","import axios from 'axios';\r\nimport {API_URL} from '../constants'\r\n\r\nexport default {\r\n    register (params, callback) {\r\n        axios.post(API_URL + 'register-user', params).then((data) => {\r\n            callback(data);\r\n        })\r\n    },\r\n\r\n    login (params, callback) {\r\n        axios.post(API_URL + 'login', params).then((data) => {\r\n            callback(data);\r\n        })\r\n    }\r\n}\r\n","import types from '../types'\r\nimport api from \"../../api/api\";\r\nimport {Base64} from \"js-base64\";\r\nimport axios from \"axios/index\";\r\n\r\n\r\nconst decodeToken = (data = window.localStorage.getItem('token')) => {\r\n    let state = {};\r\n    if (data) {\r\n        let token = data;\r\n\r\n        state.token = token;\r\n        token = token.replace(\"Bearer \", \"\");\r\n        token = token.split('.');\r\n\r\n        let header = token[0];\r\n        let payload = token[1];\r\n        let signature = token[2];\r\n        payload = JSON.parse(Base64.decode(payload));\r\n\r\n        state.userId = payload.userId;\r\n        state.firstName = payload.firstName;\r\n        state.lastName = payload.lastName;\r\n        state.email = payload.email;\r\n\r\n        axios.defaults.headers.common['Authorization'] = data;\r\n        state.logged = true;\r\n        localStorage.setItem('token', data);\r\n    }\r\n    return state;\r\n\r\n};\r\n\r\nexport default  {\r\n    login(email, password) {\r\n        return dispatch => {\r\n            const params = {\r\n                email: email,\r\n                password: password,\r\n            };\r\n            api.login(params, (data) => {\r\n                const state = decodeToken(data.data);\r\n                dispatch(this.loginRequest({\r\n                    type: types.LOGIN,\r\n                    ...state,\r\n                }));\r\n            });\r\n        }\r\n\r\n    },\r\n\r\n    loginRequest(json) {\r\n        return json;\r\n    },\r\n\r\n    checkLogged() {\r\n        const state = decodeToken();\r\n        return {\r\n            type: types.CHECK_LOGGED,\r\n            ...state\r\n        }\r\n    },\r\n\r\n    logout() {\r\n        return {\r\n            type: types.LOGOUT,\r\n        }\r\n    }\r\n}\r\n","import types from '../types';\r\nimport api from '../../api/api';\r\nimport { Base64 } from 'js-base64';\r\nimport axios from 'axios';\r\n\r\nconst initialState = {\r\n    logged: false,\r\n    token: undefined,\r\n    userId: '',\r\n    firstName: '',\r\n    lastName: '',\r\n    email: '',\r\n};\r\n\r\nexport function authReducers(state, action) {\r\n    if (typeof state === 'undefined') {\r\n        return initialState;\r\n    }\r\n\r\n    switch (action.type) {\r\n        case types.LOGIN: {\r\n            state = {\r\n                ...action\r\n            };\r\n\r\n            break;\r\n        }\r\n\r\n        case types.CHECK_LOGGED: {\r\n            if(!action.token) {\r\n                state.token = undefined;\r\n                state.logged = false;\r\n            }\r\n            else {\r\n                state = {\r\n                    ...action\r\n                };\r\n            }\r\n\r\n\r\n            break;\r\n        }\r\n\r\n        case types.LOGOUT: {\r\n            window.localStorage.removeItem('token');\r\n            axios.defaults.headers.common['Authorization'] = '';\r\n\r\n            state.token = undefined;\r\n            state.logged = false;\r\n\r\n            break;\r\n        }\r\n    }\r\n\r\n        return state;\r\n}\r\n","import types from '../types';\r\nimport api from '../../api/api';\r\nimport { Base64 } from 'js-base64';\r\nimport axios from 'axios';\r\n\r\nconst initialState = {\r\n    socketId: '',\r\n};\r\n\r\nexport function socketReducers(state, action) {\r\n    if (typeof state === 'undefined') {\r\n        return initialState;\r\n    }\r\n\r\n    switch (action.type) {\r\n        case types.SOCKET_ID: {\r\n            state.socketId = action.socketId;\r\n            break;\r\n        }\r\n    }\r\n\r\n        return state;\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport { authReducers } from \"./Auth/reducers\";\r\nimport { socketReducers} from \"./Socket/reducers\";\r\n\r\nexport default combineReducers({\r\n    auth: authReducers,\r\n    s_socket: socketReducers,\r\n});\r\n","import types from '../types'\r\n\r\nexport default  {\r\n    writeSocketId(socketId) {\r\n        return {\r\n            type: types.SOCKET_ID,\r\n            socketId: socketId,\r\n        }\r\n    }\r\n}\r\n","import auth  from './Auth/actions';\r\nimport socket  from './Socket/actions';\r\n\r\nexport default {\r\n    ...auth,\r\n    ...socket,\r\n}\r\n","import actions from \"./actions\";\r\nimport { connect } from 'react-redux';\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        ...state\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    ...actions,\r\n};\r\n\r\nexport const store = (component) => {\r\n    return connect(mapStateToProps, mapDispatchToProps)(component);\r\n};\r\n","import React, {useState, useEffect, useMemo} from \"react\";\r\nimport { store } from \"../store\";\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\nfunction Header(props) {\r\n    const history = useHistory();\r\n    let logged = props.auth.logged;\r\n\r\n    let logout = () => {\r\n        props.logout();\r\n        history.push(\"/\");\r\n    };\r\n\r\n    const infoJsx = () => {\r\n        if(logged) {\r\n            return (\r\n                <div className=\"actions\">\r\n                    <a href=\"#\" onClick={(e) => {e.preventDefault(); logout()}}>\r\n\r\n                        Logout\r\n                    </a>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        else {\r\n            return(\r\n                <div className=\"actions\">\r\n                    <Link to=\"/registration\">Sign Up</Link>\r\n                </div>\r\n\r\n            );\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"header\">\r\n            <div className=\"logo\">\r\n                Chatick\r\n            </div>\r\n\r\n            {infoJsx()}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default store(Header);\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nimport { store } from '../store/index';\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n\r\nfunction SingIn(props) {\r\n    let history = useHistory();\r\n    useEffect(() =>{\r\n        if (props.auth.logged) {\r\n            history.push(\"/chat\");\r\n        }\r\n    },[props.auth.logged]);\r\n\r\n    const [state, setState] = useState({email: '', password: ''});\r\n\r\n    const handleChange = (e) => {\r\n        setState({\r\n            ...state,\r\n            [e.target.name]: e.target.value,\r\n        });\r\n    };\r\n    const submitForm =  (e) => {\r\n        e.preventDefault();\r\n        props.login(state.email, state.password);\r\n    };\r\n\r\n\r\n    return (\r\n        <div className=\"page-wrapper sign-in form\">\r\n            <div className=\"form\">\r\n                <div className=\"form__title\">\r\n                    LOGIN\r\n                </div>\r\n                <form onSubmit={submitForm}>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"email\">Email address</label>\r\n                        <input type=\"email\"\r\n                               className=\"form-control\"\r\n                               name=\"email\"\r\n                               id=\"email\"\r\n                               autoComplete=\"username\"\r\n                               placeholder=\"Enter email\"\r\n                               value={state.email}\r\n                               onChange={handleChange}\r\n                        />\r\n                        <small id=\"emailHelp\" className=\"form-text text-muted\">We'll never share your email with\r\n                            anyone else.\r\n                        </small>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"password\">Password</label>\r\n                        <input type=\"password\"\r\n                               className=\"form-control\"\r\n                               name=\"password\"\r\n                               id=\"password\"\r\n                               autoComplete=\"current-password\"\r\n                               placeholder=\"Password\"\r\n                               value={state.password}\r\n                               onChange={handleChange}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form__buttons\">\r\n                        <button type=\"submit\" className=\"btn btn-primary w-100\">Login</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\nexport default store(SingIn);\r\n","import React, { useState } from 'react'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useForm } from 'react-hook-form';\r\nimport api from '../api/api';\r\nimport { store } from '../store/index';\r\n\r\nfunction SingUp(props) {\r\n    const history = useHistory();\r\n    const { register, handleSubmit, watch, errors } = useForm();\r\n    const [state, setState] = useState({\r\n        firstName: '',\r\n        lastName: '',\r\n        email: '',\r\n        password: '',\r\n    });\r\n\r\n    const submitForm = () => {\r\n        api.register(state, (data) => {\r\n            console.log(data)\r\n        })\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        setState({\r\n            ...state,\r\n            [e.target.name]: e.target.value\r\n        });\r\n\r\n    };\r\n\r\n    return (\r\n\r\n        <div className=\"page-wrapper sign-up\">\r\n            <div className=\"form\">\r\n                <div className=\"form__title\">\r\n                    Registration\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit(submitForm)}>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"firstName\">First Name</label>\r\n\r\n                        <input type=\"text\"\r\n                               className=\"form-control\"\r\n                               id=\"firstName\"\r\n                               name=\"firstName\"\r\n                               placeholder=\"First Name\"\r\n                               ref={register({ required: true })}\r\n                               onChange={handleChange}\r\n                               value={state.firstName}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"lastName\">Last Name</label>\r\n                        <input type=\"text\"\r\n                               className=\"form-control\"\r\n                               id=\"lastName\"\r\n                               name=\"lastName\"\r\n                               placeholder=\"Last Name\"\r\n                               onChange={handleChange}\r\n                               value={state.lastName}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"email\">Email address</label>\r\n\r\n                        <input type=\"email\"\r\n                               className=\"form-control\"\r\n                               id=\"email\"\r\n                               name=\"email\"\r\n                               autoComplete=\"username\"\r\n                               placeholder=\"Enter email\"\r\n                               onChange={handleChange}\r\n                               value={state.email}\r\n                        />\r\n\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"password\">Password</label>\r\n                        <input type=\"password\"\r\n                               className=\"form-control\"\r\n                               id=\"password\"\r\n                               name=\"password\"\r\n                               placeholder=\"Password\"\r\n                               autoComplete=\"current-password\"\r\n                               onChange={handleChange}\r\n                               value={state.password}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form__buttons\">\r\n                        <button\r\n                            type=\"submit\"\r\n                            className=\"btn btn-primary\"\r\n                        >\r\n                            Registration\r\n                        </button>\r\n                        <button\r\n                            onClick={() => {history.push(\"/\");}}\r\n                            className=\"btn btn-dark\"\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default store(SingUp);\r\n\r\n","// document.addEventListener('DOMContentLoaded', function () {\r\n//\r\n// });\r\nfunction addSize() {\r\n    let app = document.querySelector('#app');\r\n    let header = document.querySelector('.header');\r\n    let chat_send_area = document.querySelector('.chat__send-area');\r\n    let page_wrapper = document.querySelector('.page-wrapper');\r\n    let messages = document.querySelector('.chat .messages');\r\n    let chat_header = document.querySelector('.chat .chat__header');\r\n\r\n\r\n    function main() {\r\n        if (header && chat_send_area && page_wrapper && messages && chat_header) {\r\n            let headerHeight = header.clientHeight;\r\n            let chat_send_areaHeight = chat_send_area.clientHeight;\r\n            let chat_headerHeight = chat_header.clientHeight;\r\n\r\n            page_wrapper.style.paddingTop = `${headerHeight}px`;\r\n            messages.style.height = `calc(100% - ${chat_send_areaHeight + chat_headerHeight}px)`;\r\n        }\r\n    }\r\n\r\n    main();\r\n\r\n    window.addEventListener('resize', () => {\r\n        main();\r\n    });\r\n}\r\n\r\nfunction scrollMessage() {\r\n    let messages = document.querySelector('.chat .messages');\r\n    if (messages) {\r\n        messages.scrollTop = messages.scrollHeight;\r\n    }\r\n}\r\n\r\n\r\nexport default {\r\n    addSize,\r\n    scrollMessage,\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { store } from '../store/index'\r\nimport mixins from '../script'\r\nimport avaImg from '../assets/images/ava.png';\r\n\r\nclass Chat extends Component {\r\n    render() {\r\n        let outputMessage = this.props.messages.map((el, i) => {\r\n            let isMyself = false;\r\n            el.userId === this.props.auth.userId ? isMyself = true : isMyself = false;\r\n\r\n            return (\r\n                <div key={i} className={isMyself ? 'messages__item messages__item--my-message' : \"messages__item\"}>\r\n                    <div className=\"messages__photo\">\r\n                        <img src={avaImg} alt=\"\"/>\r\n                        <div className=\"user-status user-status--online\"/>\r\n                    </div>\r\n                    <div className=\"messages__block\">\r\n                        <div className=\"messages__author\">\r\n                            {!isMyself ? el.firstName + ' ' + el.lastName + '': el.firstName + ' ' + el.lastName + ''}\r\n                            <span className=\"messages__time\">8min</span>\r\n                        </div>\r\n                        <div className={'messages__text'} >\r\n                            {el.message}\r\n                            <div className=\"messages__read-message\">\r\n                                <i className=\"icofont-check-alt\"/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        });\r\n\r\n        return (\r\n            <div className=\"chat\">\r\n                <div className=\"chat__header\">\r\n                    <div className=\"chat__head-text\">\r\n                        @General chat\r\n                    </div>\r\n                    <div className=\"chat__close\">\r\n                        <i className=\"icofont-close-line\"/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"messages\">\r\n                    {outputMessage}\r\n                </div>\r\n                <div className=\"chat__send-area\">\r\n                    <div className=\"chat__typing\">\r\n                        <span>Petya and Valera are typing</span>\r\n                    </div>\r\n                    <div className=\"chat__textarea-wrap\">\r\n                        <div className=\"chat__expressionless\">\r\n                            <i className=\"icofont-expressionless\" />\r\n                        </div>\r\n\r\n                        <input type=\"text\"\r\n                               className=\"chat__input-message\"\r\n                               placeholder=\"Enter your message\"\r\n                               onChange={this.props.handleChange}\r\n                               value={this.props.state.messageInput}\r\n                               onKeyPress={this.props.keyPressed}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"chat__send-message\" onClick={()=>{this.props.sendMessage()}}>\r\n                        <i className=\"icofont-paper-plane\" />\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Chat;\r\n\r\n","import React, { Component } from 'react'\r\nimport { store } from '../store/index'\r\nimport mixins from '../script'\r\nimport Chat from './Chat'\r\nimport avaImg from '../assets/images/ava.png';\r\n\r\nclass GeneralChat extends Component {\r\n    _isMounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            socketIdPrev: '',\r\n            messageInput: '',\r\n            messages: [],\r\n        };\r\n        this.props.socket.on('connect', () => {\r\n\r\n        });\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        mixins.addSize();\r\n        if(this.props.auth.logged) {\r\n            this._isMounted = true;\r\n\r\n            this.props.socket.on('message', (data) => {\r\n                let newState = this.state;\r\n                newState.messages = [...newState.messages, {\r\n                    message: data.messageInput,\r\n                    userId: data.userId,\r\n                    firstName: data.firstName,\r\n                    lastName: data.lastName,\r\n                }];\r\n\r\n                if (this._isMounted) {\r\n                    this.setState({\r\n                            ...newState,\r\n                        }\r\n                    );\r\n                }\r\n\r\n                mixins.scrollMessage();\r\n            });\r\n\r\n            if (this.props.socket.id !== this.state.socketIdPrev) {\r\n                this.props.socket.emit('getGeneralMessage');\r\n            }\r\n\r\n            this.props.socket.on('getGeneralMessage', (data) => {\r\n                if (this.props.socket.id !== this.state.socketIdPrev) {\r\n                    let newState = this.state;\r\n                    newState.socketIdPrev = this.props.socket.id;\r\n                    newState.messages = data;\r\n\r\n                    if (this._isMounted) {\r\n                        this.setState({\r\n                                ...newState,\r\n                            }\r\n                        );\r\n                    }\r\n                    mixins.scrollMessage();\r\n                }\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    componentWillUnmount(prevLogged) {\r\n        this._isMounted = false;\r\n    }\r\n\r\n    keyPressed = event => {\r\n        if (event.key === \"Enter\") {\r\n            this.sendMessage();\r\n        }\r\n    };\r\n\r\n    sendMessage() {\r\n        if (this.state.messageInput !== \"\") {\r\n            this.props.socket.emit('message', {\r\n                messageInput: this.state.messageInput,\r\n                userId: this.props.auth.userId,\r\n                firstName: this.props.auth.firstName,\r\n                lastName: this.props.auth.lastName,\r\n            });\r\n\r\n            let newState = this.state;\r\n            newState.messageInput = \"\";\r\n            this.setState({\r\n                    ...newState,\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n    handleChange = e => {\r\n        let newState = this.state;\r\n        newState.messageInput = e.target.value.replace(/\\n/g, '');\r\n        this.setState({\r\n                ...newState,\r\n            }\r\n        );\r\n    };\r\n\r\n\r\n    render() {\r\n        return (\r\n            <Chat\r\n                messages={this.state.messages}\r\n                state={this.state}\r\n                auth={this.props.auth}\r\n                handleChange={this.handleChange}\r\n                keyPressed={this.keyPressed}\r\n                sendMessage={this.sendMessage}\r\n            />\r\n        );\r\n\r\n    }\r\n\r\n    // render() {\r\n    //     return (\r\n    //         <div>ad</div>\r\n    //     );\r\n    // }\r\n}\r\n\r\nexport default store(GeneralChat);\r\n\r\n","import React, {Component, useEffect, useState} from 'react'\r\nimport {store} from '../store/index';\r\nimport avaImg from '../assets/images/ava.png';\r\nimport {Link} from \"react-router-dom\"\r\n\r\nconst Users = (props) => {\r\n    const [state, setState] = useState({\r\n        users: [],\r\n        usersConnect: [],\r\n        socketId: '',\r\n        socketIdPrev: '',\r\n    });\r\n\r\n    // props.socket.on('connect', () => {\r\n    //     console.log(props.socket.id);\r\n    // });\r\n\r\n    useEffect(() =>{\r\n        if (props.auth.logged) {\r\n            props.socket.emit('userConnect',{\r\n                userId: props.auth.userId,\r\n            });\r\n\r\n            props.socket.on('userConnect', (data) => {\r\n                let newState = state;\r\n                newState.users = [];\r\n\r\n                data.users.map((user) => {\r\n                    data.usersConnect.map((userConnect) => {\r\n                        if (user._id === userConnect.userId) {\r\n                            user.socketId = userConnect.socketId;\r\n                        }\r\n                    });\r\n\r\n                    newState.users.push(user);\r\n                });\r\n\r\n                setState({\r\n                        ...newState,\r\n                    }\r\n                );\r\n            });\r\n        }\r\n    },[props.auth.logged, window]);\r\n\r\n    let sendMessage = () => {\r\n        props.socket.emit('message', {messageInput: state.messageInput, userId: props.auth.userId});\r\n    };\r\n\r\n    let handleChange = (e) => {\r\n        let newState = state;\r\n        newState.messageInput = e.target.value;\r\n        this.setState({\r\n                ...newState,\r\n            }\r\n        );\r\n    };\r\n\r\n    let outputUsers = state.users.map((el, i) => {\r\n        if (el._id !== props.auth.userId) {\r\n            return (\r\n                <Link key={i} to={`/chat/${el._id}${el.socketId ? '/' + el.socketId : ''}`}>\r\n                    <div className=\"users__item\">\r\n                        <div className=\"users__photo\">\r\n                            <img src={avaImg} alt=\"\"/>\r\n                            <div\r\n                                className={el.socketId ? 'user-status user-status--online': 'user-status'}\r\n                            />\r\n                        </div>\r\n                        <div className=\"users__info\">\r\n                            <div className=\"users__name\">\r\n                                {el.firstName} {el.lastName}\r\n                                <span className=\"users__time\">8min</span>\r\n                            </div>\r\n                            <div className=\"users__last-message\">\r\n                                Hey last, can\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </Link>\r\n\r\n            );\r\n        }\r\n    });\r\n\r\n    return (\r\n        <div className=\"users\">\r\n            <div className=\"users__profile\">\r\n                <div className=\"users__item\">\r\n                    <div className=\"users__photo\">\r\n                        <img src={avaImg} alt=\"\"/>\r\n                        {/*<div className=\"user-status user-status--online\"/>*/}\r\n                    </div>\r\n                    <div className=\"users__info\">\r\n                        <div className=\"users__name\">\r\n                            {props.auth.firstName} {props.auth.lastName}\r\n                        </div>\r\n                        <div className=\"users__status-text\">\r\n                            Status\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"users__notification\">\r\n                        <i className=\"icofont-notification\"/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"users__search\">\r\n                <input\r\n                    type=\"text\"\r\n                    className=\"users__search-input\"\r\n                    placeholder=\"Search\"\r\n                />\r\n            </div>\r\n            {outputUsers}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default store(Users);\r\n\r\n","import React, { Component } from 'react'\r\nimport { store } from '../store/index'\r\nimport mixins from '../script'\r\nimport Chat from './Chat'\r\nimport avaImg from '../assets/images/ava.png';\r\nimport { withRouter } from \"react-router\";\r\n\r\nclass PrivateChat extends Component {\r\n    _isMounted = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            socketIdPrev: '',\r\n            messageInput: '',\r\n            messages: [],\r\n        };\r\n\r\n        // let {userId} = props.useParams();\r\n        // console.log(props.match.params.userId);\r\n        // console.log(props.match.params.socketId);\r\n    }\r\n\r\n    componentDidMount() {\r\n        mixins.addSize();\r\n        if(this.props.auth.logged) {\r\n            this._isMounted = true;\r\n                this.props.socket.on('privateMessage', (data) => {\r\n                if (data.userFromId === this.props.auth.userId ||\r\n                    data.userFromId === this.props.match.params.userId) {\r\n                    let newState = this.state;\r\n                    newState.messages = [...newState.messages, {\r\n                        message: data.messageInput,\r\n                        userId: data.userFromId,\r\n                        firstName: data.firstName,\r\n                        lastName: data.lastName,\r\n                    }];\r\n\r\n                    if (this._isMounted) {\r\n                        this.setState({\r\n                                ...newState,\r\n                            }\r\n                        );\r\n                    }\r\n\r\n                    mixins.scrollMessage();\r\n                }\r\n            });\r\n\r\n            if (this.props.socket.id !== this.state.socketIdPrev) {\r\n                this.props.socket.emit('getPrivateMessage', {\r\n                    userFromId: this.props.auth.userId,\r\n                    userToId: this.props.match.params.userId,\r\n                });\r\n            }\r\n\r\n            this.props.socket.on('getPrivateMessage', (data) => {\r\n                if (this.props.socket.id !== this.state.socketIdPrev) {\r\n                    let newState = this.state;\r\n                    newState.socketIdPrev = this.props.socket.id;\r\n                    newState.messages = data;\r\n\r\n                    if (this._isMounted) {\r\n                        this.setState({\r\n                                ...newState,\r\n                            }\r\n                        );\r\n                    }\r\n                    mixins.scrollMessage();\r\n                }\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    componentWillUnmount(prevLogged) {\r\n        this._isMounted = false;\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.match.params.userId !== this.props.match.params.userId) {\r\n            let newState = this.state;\r\n            newState.messages = [];\r\n            this.setState({\r\n                    ...newState,\r\n                }\r\n            );\r\n\r\n            this.props.socket.emit('getPrivateMessage', {\r\n                userFromId: this.props.auth.userId,\r\n                userToId: this.props.match.params.userId,\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n\r\n    keyPressed = event => {\r\n        if (event.key === \"Enter\") {\r\n            this.sendMessage();\r\n        }\r\n    };\r\n\r\n    sendMessage() {\r\n        if (this.state.messageInput !== \"\") {\r\n            this.props.socket.emit('privateMessage', {\r\n                messageInput: this.state.messageInput,\r\n                userFromId: this.props.auth.userId,\r\n                userToId: this.props.match.params.userId,\r\n                firstName: this.props.auth.firstName,\r\n                lastName: this.props.auth.lastName,\r\n                socketId: this.props.match.params.socketId,\r\n            });\r\n\r\n            let newState = this.state;\r\n            newState.messageInput = \"\";\r\n            this.setState({\r\n                    ...newState,\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n    handleChange = e => {\r\n        let newState = this.state;\r\n        newState.messageInput = e.target.value.replace(/\\n/g, '');\r\n        this.setState({\r\n                ...newState,\r\n            }\r\n        );\r\n    };\r\n\r\n\r\n    render() {\r\n        return (\r\n            <Chat\r\n                messages={this.state.messages}\r\n                state={this.state}\r\n                auth={this.props.auth}\r\n                handleChange={this.handleChange}\r\n                keyPressed={this.keyPressed}\r\n                sendMessage={this.sendMessage}\r\n            />\r\n\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default store(withRouter(PrivateChat));\r\n\r\n","import React, { useState, useEffect } from 'react'\r\nimport { store } from '../store/index'\r\nimport actions from '../store/actions'\r\nimport GeneralChat from './GeneralChat'\r\nimport Users from './Users'\r\nimport { URL } from '../constants'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {BrowserRouter, Switch, Route, useParams} from \"react-router-dom\"\r\nimport PrivateChat from './PrivateChat'\r\n\r\nimport io from 'socket.io-client'\r\nconst socket = io(URL);\r\n\r\nfunction ChatWrapper(props) {\r\n    let history = useHistory();\r\n    const [state, setState] = useState({socket: undefined});\r\n    useEffect(() => {\r\n        if (!props.auth.logged) {\r\n            history.push(\"/\");\r\n        }\r\n        else {\r\n        }\r\n\r\n    }, [props.auth.logged]);\r\n\r\n    if (socket) {\r\n        return (\r\n            <div className=\"page-wrapper chat-wrapper\">\r\n                <div className=\"container-fluid h-100\">\r\n                    <div className=\"row h-100\">\r\n                        <div className=\"col-md-3 h-100 px-0\">\r\n                            <Users socket={socket} />\r\n                        </div>\r\n                        <div className=\"col-md-6 h-100 px-0\">\r\n                            <Switch>\r\n                                <Route path={`/chat/:userId/:socketId`}>\r\n                                    <PrivateChat socket={socket} useParams={useParams}/>\r\n                                </Route>\r\n                                <Route path={`/chat/:userId`}>\r\n                                    <PrivateChat socket={socket} useParams={useParams}/>\r\n                                </Route>\r\n                                <Route path={`/chat`}>\r\n                                    <GeneralChat socket={socket}/>\r\n                                </Route>\r\n                            </Switch>\r\n                        </div>\r\n\r\n                        <div className=\"col-md-3 h-100 px-0\">\r\n                            <div className=\"details\"/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    else {\r\n        return (<div>loading</div>)\r\n    }\r\n\r\n\r\n}\r\nexport default store(ChatWrapper);\r\n\r\n","import React,{useEffect} from 'react';\r\nimport {store} from \"./store\";\r\nimport Header from \"./components/header\";\r\n\r\n// import {Router, Route, Switch, Redirect} from \"react-router\";\r\n// import { createBrowserHistory } from \"history\";\r\n\r\nimport {BrowserRouter, Switch, Route} from \"react-router-dom\"\r\n\r\n// import openSocket from 'socket.io-client';\r\nimport SignIn from \"./pages/SignIn\";\r\nimport SignUp from \"./pages/SignUp\";\r\nimport ChatWrapper from \"./pages/ChatWrapper\";\r\n\r\n// const history = createBrowserHistory();\r\n// let path = history.location.pathname;\r\n\r\nfunction App(props) {\r\n    useEffect(() => {\r\n        props.checkLogged();\r\n        // const socket = openSocket('http://localhost:5000');\r\n    },[]);\r\n\r\n\r\n    return (\r\n        <BrowserRouter>\r\n            <Header />\r\n            <Switch>\r\n                <Route path=\"/chat\" component={ChatWrapper}/>\r\n                <Route path=\"/registration\" component={SignUp}/>\r\n                <Route path=\"/\" component={SignIn}/>\r\n            </Switch>\r\n\r\n        </BrowserRouter>\r\n    )\r\n}\r\n\r\nexport default store(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport actions from './store/Auth/actions'\r\n\r\nimport reducers from './store/reducers';\r\nimport App from './App';\r\n\r\n// styles\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './assets/sass/app.scss'\r\nimport './assets/libs/icofont.min.css'\r\n\r\nconst store = createStore(reducers, applyMiddleware(thunk));\r\n// store.getState();\r\n// store.subscribe(() => store.getState());\r\n//store.dispatch(actions.loginRequest()).then(() => console.log(store.getState()))\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>,\r\n    document.getElementById('app')\r\n);\r\n","module.exports = __webpack_public_path__ + \"static/media/ava.e4c49134.png\";"],"sourceRoot":""}